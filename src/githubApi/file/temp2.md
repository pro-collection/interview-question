##### å‰ç«¯æƒé™è®¾è®¡æ€è·¯

é¡¹ç›®ä¸­ï¼Œå°¤å…¶æ˜¯ç®¡ç†åå°å¿…ä¸å¯å°‘çš„ä¸€ä¸ªç¯èŠ‚å°±æ˜¯æƒé™è®¾è®¡ã€‚é€šå¸¸ä¸€ä¸ªç³»ç»Ÿä¸‹çš„ä¸åŒç”¨æˆ·ä¼šå¯¹åº”ä¸åŒçš„è§’è‰²ï¼Œä¸åŒè§’è‰²ä¼šå¯¹åº”ä¸åŒçš„ç»„ç»‡ã€‚åœ¨è¿›å…¥åˆ°ç®¡ç†é‡Œåå°çš„æ—¶å€™ä¼šå»è¯·æ±‚å¯¹åº”çš„æƒé™æ¥å£ï¼Œè¿™ä¸ªæ¥å£é‡Œæœ‰å’Œåå°çº¦å®šå¥½çš„æƒé™æ ‡è¯†å†…å®¹ï¼Œå¦‚æœæƒé™ç®¡ç†ä¸æ˜¯å¾ˆå¤æ‚ï¼Œå¯ä»¥å°†å½“å‰ç”¨æˆ·çš„æ‰€æœ‰æƒé™æ ‡è¯†ä¸€æ¬¡æ€§è¿”å›ï¼Œå‰ç«¯è¿›è¡Œä¸€ä¸ªæŒä¹…åŒ–å­˜å‚¨ï¼Œä¹‹åæ ¹æ®è§„åˆ™å¤„ç†å³å¯ã€‚å¦‚æœæ˜¯ä¸ªæä¸ºå¤æ‚çš„æƒé™ç®¡ç†ï¼Œç”šè‡³å­˜åœ¨ä¸åŒæ“ä½œå¯¼è‡´åŒä¸€ç”¨æˆ·å¯¹åº”åç»­æµç¨‹æƒé™å˜åŒ–çš„æƒ…å†µï¼Œè¿™é‡Œå°±å»ºè®®ç”¨æˆ·é¦–æ¬¡ç™»å½•ç®¡ç†åå°æ—¶ï¼Œè·å–çš„æ˜¯æœ€é«˜ä¸€å±‚æƒé™ï¼Œå³å¯ä»¥çœ‹åˆ°çš„é¡µé¢æƒé™ï¼Œä¹‹ååœ¨ç”¨æˆ·æ¯æ¬¡åšäº†ä¸åŒæ“ä½œï¼Œåˆ‡æ¢é¡µé¢çš„æ—¶å€™ï¼Œæ ¹æ®çº¦å®šå¥½çš„è§„åˆ™ï¼Œåœ¨é¡µé¢è·¯ç”±åˆ‡æ¢çš„æ—¶å€™å»è¯·æ±‚ä¸‹ä¸€ä¸ªé¡µé¢å¯¹åº”çš„æƒé™ï¼ˆå¯ä»¥ç²¾ç¡®åˆ°æ¯ä¸ªäº¤äº’åŠ¨ä½œï¼‰ï¼Œè¿™æ ·èƒ½æ›´åŠ ç²¾ç¡®çš„ç®¡ç†æƒé™ã€‚

##### taroæ˜¯å¦‚ä½•å°†reactä»£ç è½¬æ¢æˆå¯¹åº”çš„å°ç¨‹åºä»£ç æˆ–å…¶ä»–å¹³å°ä»£ç 

å¹³æ—¶ä½¿ç”¨React JSXè¿›è¡Œå¼€å‘æ—¶ï¼Œè¦çŸ¥é“Reactå°†å…¶æ ¸å¿ƒåŠŸèƒ½åˆ†æˆäº†ä¸‰éƒ¨åˆ†ï¼šReact Coreï¼ˆè´Ÿè´£å¤„ç†æ ¸å¿ƒAPIã€ä¸ç»ˆç«¯å¹³å°å’Œæ¸²æŸ“è§£è€¦ï¼Œæä¾›äº†createElementã€createClassã€Componentã€Childrenç­‰æ–¹æ³•ï¼‰ã€React Rendererï¼ˆæ¸²æŸ“å™¨ï¼Œå®šä¹‰äº†React Treeå¦‚ä½•æ„å»ºä»¥æ¥è½¨ä¸åŒå¹³å°ï¼Œæœ‰React-domã€React-Natvieç­‰ï¼‰ã€React Reconcilerï¼ˆè°ƒå’Œå™¨ï¼Œè´Ÿè´£diffç®—æ³•ï¼Œæ¥é©³patchè¡Œä¸ºã€‚ä¸ºæ¸²æŸ“å™¨æä¾›åŸºç¡€è®¡ç®—èƒ½åŠ›ï¼Œä¸»è¦æœ‰16ç‰ˆæœ¬ä¹‹å‰çš„Stack Reconcilerå’Œ16åŠå…¶ä¹‹åçš„Fiber Reconcilerï¼‰ã€‚Reactå›¢é˜Ÿå°†Reconcilerä½œä¸ºä¸€ä¸ªå•ç‹¬çš„åŒ…å‘å¸ƒï¼Œä»»ä½•å¹³å°çš„æ¸²æŸ“å™¨å‡½æ•°åªè¦åœ¨HostConfigï¼ˆå®¿ä¸»é…ç½®ï¼‰å†…ç½®åŸºæœ¬æ–¹æ³•ï¼Œå°±å¯ä»¥æ„é€ è‡ªå·±çš„æ¸²æŸ“é€»è¾‘ã€‚æœ‰äº†react-reconcilerçš„æ”¯æŒã€‚Taroå›¢é˜Ÿå°±æ˜¯æä¾›äº†taro-reactï¼ˆå®ç°äº†HostConfigï¼‰åŒ…æ¥è¿æ¥react-reconcilerå’Œtaro-runtimeã€‚å¼€å‘è€…å†™çš„Reactä»£ç ï¼ŒTaroé€šè¿‡CLIå°†ä»£ç è¿›è¡Œwebpackæ‰“åŒ…ï¼Œtaroå®ç°äº†ä¸€å¥—å®Œæ•´çš„DOMå’ŒBOM APIåœ¨å„ä¸ªå¹³å°çš„é€‚é…ï¼Œæ‰“åŒ…å®Œä¹‹åï¼Œå°±å¯ä»¥å°†ç¨‹åºæ¸²æŸ“åˆ°å¯¹åº”çš„å¹³å°ä¸Šã€‚ æ ¸å¿ƒå°±åœ¨äºå¯¹è¾“å…¥çš„æºä»£ç çš„è¯­æ³•åˆ†æï¼Œè¯­æ³•æ ‘æ„å»ºï¼Œéšåå¯¹è¯­æ³•æ ‘è¿›è¡Œè½¬æ¢æ“ä½œå†è§£æç”Ÿæˆç›®æ ‡ä»£ç çš„è¿‡ç¨‹ã€‚

##### tokenå¯ä»¥æ”¾åœ¨cookieé‡Œå—ï¼Ÿ

å½“è¢«é—®è¿™ä¸ªé—®é¢˜çš„æ—¶å€™ï¼Œç¬¬ä¸€æ—¶é—´è¦æƒ³åˆ°å®‰å…¨é—®é¢˜ã€‚é€šå¸¸å›ç­”ä¸å¯ä»¥ï¼Œå› ä¸ºå­˜åœ¨CSRFï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰é£é™©ï¼Œæ”»å‡»è€…å¯ä»¥å†’ç”¨Cookieä¸­çš„ä¿¡æ¯æ¥å‘é€æ¶æ„è¯·æ±‚ã€‚è§£å†³CSRFé—®é¢˜ï¼Œå¯ä»¥è®¾ç½®åŒæºæ£€æµ‹ï¼ˆOriginå’ŒRefererè®¤è¯ï¼‰ï¼Œä¹Ÿå¯ä»¥è®¾ç½®Samesiteä¸ºStrictã€‚æœ€å¥½å˜›ï¼Œå°±æ˜¯ä¸æŠŠtokenæ”¾åœ¨cookieé‡Œå’¯ã€‚

##### å‰ç«¯åŸ‹ç‚¹çš„å®ç°ï¼Œè¯´è¯´çœ‹æ€è·¯

å¯¹äºåŸ‹ç‚¹æ–¹æ¡ˆï¼šä¸€èˆ¬åˆ†ä¸ºæ‰‹åŠ¨åŸ‹ç‚¹ï¼ˆä¾µå…¥æ€§å¼ºï¼Œå’Œä¸šåŠ¡å¼ºå…³è”ï¼Œç”¨äºéœ€è¦ç²¾ç¡®æœé›†å¹¶åˆ†ææ•°æ®ï¼Œä¸è¿‡è¯¥æ–¹å¼è€—æ—¶è€—åŠ›ï¼Œä¸”å®¹æ˜“å‡ºç°è¯¯å·®ï¼Œåç»­è¦è°ƒæ•´ï¼Œæˆæœ¬è¾ƒé«˜ï¼‰ã€å¯è§†åŒ–åŸ‹ç‚¹ï¼ˆæä¾›ä¸€ä¸ªå¯è§†åŒ–çš„åŸ‹ç‚¹æ§åˆ¶å°ï¼Œåªèƒ½åœ¨å¯è§†åŒ–å¹³å°å·²æ”¯æŒçš„é¡µé¢è¿›è¡ŒåŸ‹ç‚¹ï¼‰ã€æ— åŸ‹ç‚¹ï¼ˆå°±æ˜¯å…¨åŸ‹ç‚¹ï¼Œç›‘æ§é¡µé¢å‘ç”Ÿçš„ä¸€åˆ‡è¡Œä¸ºï¼Œä¼˜ç‚¹æ˜¯å‰ç«¯åªéœ€è¦å¤„ç†ä¸€æ¬¡åŸ‹ç‚¹è„šæœ¬ï¼Œä¸è¿‡æ•°æ®é‡è¿‡å¤§ä¼šäº§ç”Ÿå¤§é‡çš„è„æ•°æ®ï¼Œéœ€è¦åç«¯è¿›è¡Œæ•°æ®æ¸…æ´—ï¼‰ã€‚

åŸ‹ç‚¹é€šå¸¸ä¼ é‡‡ç”¨imgæ–¹å¼æ¥ä¸Šä¼ ï¼Œé¦–å…ˆæ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒImageå¯¹è±¡ï¼Œå¹¶ä¸”è®°å½•çš„è¿‡ç¨‹å¾ˆå°‘å‡ºé”™ï¼ŒåŒæ—¶ä¸å­˜åœ¨è·¨åŸŸé—®é¢˜ï¼Œè¯·æ±‚Imageä¹Ÿä¸ä¼šé˜»å¡é¡µé¢çš„æ¸²æŸ“ã€‚å»ºè®®ä½¿ç”¨1\*1åƒç´ çš„GIFï¼Œå…¶ä½“ç§¯å°ã€‚

ç°åœ¨çš„æµè§ˆå™¨å¦‚æœæ”¯æŒNavigator.sendBeacon(url, data)æ–¹æ³•ï¼Œä¼˜å…ˆä½¿ç”¨è¯¥æ–¹æ³•æ¥å®ç°ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨å°±æ˜¯ç”¨äºç»Ÿè®¡æ•°æ®å‘é€åˆ°webæœåŠ¡å™¨ã€‚å½“ç„¶å¦‚æœä¸æ”¯æŒçš„è¯å°±ç»§ç»­ä½¿ç”¨å›¾ç‰‡çš„æ–¹å¼æ¥ä¸Šä¼ æ•°æ®ã€‚

##### è¯´è¯´å°è£…ç»„ä»¶çš„æ€è·¯

è¦è€ƒè™‘ç»„ä»¶çš„çµæ´»æ€§ã€æ˜“ç”¨æ€§ã€å¤ç”¨æ€§ã€‚ å¸¸è§çš„å°è£…æ€è·¯æ˜¯ï¼Œå¯¹äºè§†å›¾å±‚é¢ï¼Œå¦‚ç›¸ä¼¼åº¦é«˜çš„è§†å›¾ï¼Œè¿›è¡Œä¸€ä¸ªå°è£…ï¼Œæä¾›éƒ¨åˆ†å‚æ•°æ–¹ä¾¿ä½¿ç”¨è€…ä¿®æ”¹ã€‚å¯¹äºä¸šåŠ¡å¤ç”¨åº¦è¾ƒé«˜çš„ï¼Œæå–å‡ºä¸šåŠ¡ç»„ä»¶ã€‚

### æ€§èƒ½ä¼˜åŒ–é¢˜

##### ä»€ä¹ˆæƒ…å†µä¸‹ä¼šé‡ç»˜å’Œå›æµï¼Œå¸¸è§çš„æ”¹å–„æ–¹æ¡ˆ

æµè§ˆå™¨è¯·æ±‚åˆ°å¯¹åº”é¡µé¢èµ„æºçš„æ—¶å€™ï¼Œä¼šå°†HTMLè§£ææˆDOMï¼ŒæŠŠCSSè§£ææˆCSSDOMï¼Œç„¶åå°†DOMå’ŒCSSDOMåˆå¹¶å°±äº§ç”Ÿäº†Render Treeã€‚åœ¨æœ‰äº†æ¸²æŸ“æ ‘ä¹‹åï¼Œæµè§ˆå™¨ä¼šæ ¹æ®æµå¼å¸ƒå±€æ¨¡å‹æ¥è®¡ç®—å®ƒä»¬åœ¨é¡µé¢ä¸Šçš„å¤§å°å’Œä½ç½®ï¼Œæœ€åå°†èŠ‚ç‚¹ç»˜åˆ¶åœ¨é¡µé¢ä¸Šã€‚

é‚£ä¹ˆå½“Render Treeä¸­éƒ¨åˆ†æˆ–å…¨éƒ¨å…ƒç´ çš„å°ºå¯¸ã€ç»“æ„ã€æˆ–æŸäº›å±æ€§å‘ç”Ÿæ”¹å˜ï¼Œæµè§ˆå™¨å°±ä¼šé‡æ–°æ¸²æŸ“é¡µé¢ï¼Œè¿™ä¸ªå°±æ˜¯æµè§ˆå™¨çš„å›æµã€‚å¸¸è§çš„å›æµæ“ä½œæœ‰ï¼šé¡µé¢çš„é¦–æ¬¡æ¸²æŸ“ã€æµè§ˆå™¨çª—å£å°ºå¯¸æ”¹å˜ã€éƒ¨åˆ†å…ƒç´ å°ºå¯¸æˆ–ä½ç½®å˜åŒ–ã€æ·»åŠ æˆ–åˆ é™¤å¯è§çš„DOMã€æ¿€æ´»ä¼ªç±»ã€æŸ¥è¯¢æŸäº›å±æ€§æˆ–è°ƒç”¨æ–¹æ³•ï¼ˆå„ç§å®½é«˜çš„è·å–ï¼Œæ»šåŠ¨æ–¹æ³•çš„æ‰§è¡Œç­‰ï¼‰ã€‚

å½“é¡µé¢ä¸­çš„å…ƒç´ æ ·å¼çš„æ”¹å˜ä¸å½±å“å®ƒåœ¨æ–‡æ¡£æµçš„ä½ç½®æ—¶ï¼ˆå¦‚colorã€background-colorç­‰ï¼‰ï¼Œæµè§ˆå™¨å¯¹åº”å…ƒç´ çš„æ ·å¼ï¼Œè¿™ä¸ªå°±æ˜¯é‡ç»˜ã€‚

å¯è§ï¼š**å›æµå¿…å°†å¯¼è‡´é‡ç»˜ï¼Œé‡ç»˜ä¸ä¸€å®šä¼šå¼•èµ·å›æµã€‚å›æµæ¯”é‡ç»˜çš„ä»£ä»·æ›´é«˜**ã€‚

å¸¸è§æ”¹å–„æ–¹æ¡ˆï¼š

* åœ¨è¿›è¡Œé¢‘ç¹æ“ä½œçš„æ—¶å€™ï¼Œä½¿ç”¨é˜²æŠ–å’ŒèŠ‚æµæ¥æ§åˆ¶è°ƒç”¨é¢‘ç‡ã€‚
* é¿å…é¢‘ç¹æ“ä½œDOMï¼Œå¯ä»¥åˆ©ç”¨DocumentFragmentï¼Œæ¥è¿›è¡Œå¯¹åº”çš„DOMæ“ä½œï¼Œå°†æœ€åçš„ç»“æœæ·»åŠ åˆ°æ–‡æ¡£ä¸­ã€‚
* çµæ´»ä½¿ç”¨display: noneå±æ€§ï¼Œæ“ä½œç»“æŸåå°†å…¶æ˜¾ç¤ºå‡ºæ¥ï¼Œå› ä¸ºdisplayçš„å±æ€§ä¸ºnoneçš„å…ƒç´ ä¸Šè¿›è¡Œçš„DOMæ“ä½œä¸ä¼šå¼•å‘å›æµå’Œé‡ç»˜ã€‚
* è·å–å„ç§ä¼šå¼•èµ·é‡ç»˜/å›æµçš„å±æ€§ï¼Œå°½é‡å°†å…¶ç¼“å­˜èµ·æ¥ï¼Œä¸è¦é¢‘ç¹çš„å»è·å–ã€‚
* å¯¹å¤æ‚åŠ¨ç”»é‡‡ç”¨ç»å¯¹å®šä½ï¼Œä½¿å…¶è„±ç¦»æ–‡æ¡£æµï¼Œå¦åˆ™å®ƒä¼šé¢‘ç¹çš„å¼•èµ·çˆ¶å…ƒç´ åŠå…¶åç»­å…ƒç´ çš„å›æµã€‚

##### ä¸€æ¬¡è¯·æ±‚å¤§é‡æ•°æ®æ€ä¹ˆä¼˜åŒ–ï¼Œæ•°æ®å¤šå¯¼è‡´æ¸²æŸ“æ…¢æ€ä¹ˆä¼˜åŒ–

ä¸ªäººè§‰å¾—è¿™å°±æ˜¯ä¸ªä¼ªå‘½é¢˜ï¼Œé¦–å…ˆåç«¯å°±ä¸è¯¥ä¸€æ¬¡æŠŠå¤§é‡æ•°æ®è¿”å›å‰ç«¯ï¼Œä½†æ˜¯ä¼šè¿™ä¹ˆé—®ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä½œä¸ºé¢è¯•çš„å°±è€è€å®å®å›ç­”å‘—ã€‚

é¦–å…ˆå¤§é‡æ•°æ®çš„æ¥æ”¶ï¼Œé‚£ä¹ˆè‚¯å®šæ˜¯ç”¨å¼‚æ­¥çš„æ–¹å¼è¿›è¡Œæ¥æ”¶ï¼Œå¯¹æ•°æ®è¿›è¡Œä¸€ä¸ªåˆ†ç‰‡å¤„ç†ï¼Œå¯ä»¥æ‹†åˆ†æˆä¸€ä¸ªä¸ªçš„å°å•å…ƒæ•°æ®ï¼Œé€šè¿‡è‡ªå®šä¹‰çš„å±æ€§è¿›è¡Œå…³è”ã€‚è¿™æ ·æ•°æ®åˆ†ç‰‡å®Œæˆã€‚æ¥ä¸‹æ¥æ¸²æŸ“çš„è¯ï¼Œç”±äºæ˜¯å¤§é‡æ•°æ®ï¼Œå¦‚æœæ˜¯é•¿åˆ—è¡¨çš„è¯ï¼Œè¿™é‡Œå°±å¯ä»¥ä½¿ç”¨è™šæ‹Ÿåˆ—è¡¨ï¼ˆå½“å‰é¡µé¢éœ€è¦æ¸²æŸ“çš„æ•°æ®æ‹¿åˆ°è¿›è¡Œæ¸²æŸ“ï¼Œç„¶åå¯¹å‰é¢ä¸€æ®µèŒƒå›´åŠåé¢ä¸€æ®µèŒƒå›´ï¼Œç›‘å¬å¯¹åº”çš„æ»šåŠ¨æ•°æ®æ¥åˆ‡æ¢éœ€è¦æ¸²æŸ“çš„æ•°æ®ï¼Œè¿™æ ·å§‹ç»ˆè¦æ¸²æŸ“çš„å°±æ˜¯ä¸‰éƒ¨åˆ†ï¼‰ã€‚å½“ç„¶è¿˜æœ‰åˆ«çš„æ¸²æŸ“æƒ…å†µï¼Œæ¯”å¦‚echartså›¾æ ‡å¤§é‡ç‚¹ä½æ•°æ®ä¼˜åŒ–ç­‰ã€‚

### æ‰‹å†™é¢˜

##### æ¨¡æ‹Ÿé“¾è¡¨ç»“æ„

ä¸»è¦æ€è·¯å°±æ˜¯è¦æ—¶åˆ»æ¸…æ¥šå¯¹åº”Nodeçš„nextå’Œprevçš„æŒ‡å‘ï¼Œå¹¶åˆ©ç”¨whileå¾ªç¯å»åšå¯¹åº”çš„å¢åˆ æ”¹æŸ¥æ“ä½œã€‚

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b913e7e8e375443ab82950ccb1bb83d7~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

```js
class Node {
  constructor(data) {
    this.data = data; // èŠ‚ç‚¹æ•°æ®
    this.next = null; // æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
    this.prev = null; // æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹
  }
}

class LinkedList {
  constructor() {
    this.head = null; // é“¾è¡¨å¤´
    this.tail = null; // é“¾è¡¨å°¾
  }

  // åœ¨é“¾è¡¨å°¾éƒ¨æ·»åŠ æ–°èŠ‚ç‚¹
  add(item) {
    let node = new Node(item);
    if (!this.head) {
      this.head = node;
      this.tail = node;
    } else {
      node.prev = this.tail;
      this.tail.next = node;
      this.tail = node;
    }
  }

  // é“¾è¡¨æŒ‡å®šä½ç½®æ·»åŠ æ–°èŠ‚ç‚¹
  addAt(index, item) {
    let current = this.head;
    let counter = 1;
    let node = new Node(item);

    if (index === 0) {
      this.head.prev = node;
      node.next = this.head;
      this.head = node;
    } else {
      while (current) {
        current = current.next;
        if (counter === index) {
          node.prev = current.prev;
          current.prev.next = node;
          node.next = current;
          current.prev = node;
        }
        counter++;
      }
    }
  }

  remove(item) {
    let current = this.head;
    while (current) {
      if (current.data === item) {
        if (current == this.head && current == this.tail) {
          this.head = null;
          this.tail = null;
        } else if (current == this.head) {
          this.head = this.head.next;
          this.head.prev = null;
        } else if (current == this.tail) {
          this.tail = this.tail.prev;
          this.tail.next = null;
        } else {
          current.prev.next = current.next;
          current.next.prev = current.prev;
        }
      }
      current = current.next;
    }
  }

  removeAt(index) {
    let current = this.head;
    let counter = 1;

    if (index === 0) {
      this.head = this.head.next;
      this.head.prev = null;
    } else {
      while (current) {
        current = current.next;
        if (current == this.tail) {
          this.tail = this.tail.prev;
          this.tail.next = null;
        } else if (counter === index) {
          current.prev.next = current.next;
          current.next.prev = current.prev;
          break;
        }
        counter++;
      }
    }
  }

  reverse() {
    let current = this.head;
    let prev = null;
    while (current) {
      let next = current.next;
      current.next = prev;
      current.prev = next;
      prev = current;
      current = next;
    }

    this.tail = this.head;
    this.head = prev;
  }

  swap(index1, index2) {
    if (index1 > index2) {
      return this.swap(index2, index1);
    }

    let current = this.head;
    let counter = 0;
    let firstNode;

    while (current !== null) {
      if (counter === index1) {
        firstNode = current;
      } else if (counter === index2) {
        let temp = current.data;
        current.data = firstNode.data;
        firstNode.data = temp;
      }

      current = current.next;
      counter++;
    }
    return true;
  }

  traverse(fn) {
    let current = this.head;
    while (current !== null) {
      fn(current);
      current = current.next;
    }
    return true;
  }

  find(item) {
    let current = this.head;
    let counter = 0;
    while (current) {
      if (current.data == item) {
        return counter;
      }
      current = current.next;
      counter++;
    }
    return false;
  }

  isEmpty() {
    return this.length() < 1;
  }

  length() {
    let current = this.head;
    let counter = 0;
    while (current !== null) {
      counter++;
      current = current.next;
    }
    return counter;
  }
}
```

##### æ‰‹å†™ä¸€ä¸ªæ·±æ‹·è´

```ts
// æ‰‹å†™ä¸€ä¸ªæ·±æ‹·è´

function deepClone<T extends Array<T> | any>(obj: T): T {
  if (typeof obj !== "object" || obj === null) return obj;

  const result: T = obj instanceof Array ? ([] as T) : ({} as T);

  for (const key in obj) {
    if (obj.hasOwnProperty(key)) {
      result[key] = deepClone(obj[key]);
    }
  }

  return result;
}

const obj = {
  a: 1,
  b: {
    bb: "hh",
  },
  c() {
    console.log("cc");
  },
};

const cloneObj = deepClone(obj);
obj.a = 999;
console.log("cloneObj :>> ", cloneObj);
console.log("obj :>> ", obj);
// cloneObj :>>  { a: 1, b: { bb: 'hh' }, c: [Function: c] }
// obj :>>  { a: 999, b: { bb: 'hh' }, c: [Function: c] }

const arr: Array<number | string> = [1, 2, 3, "6"];
const copyArr = deepClone(arr);
arr[3] = 4;
console.log("arr | copyArr :>> ", arr, copyArr); // arr | copyArr :>>  [ 1, 2, 3, 4 ] [ 1, 2, 3, '6' ]

```

##### æ‰‹å†™Promise

```js
const PROMISE_STATUS_PENDING = "pending";
const PROMISE_STATUS_FULFILLED = "fulfilled";
const PROMISE_STATUS_REJECTED = "rejected";

// help fun
function execFunctionWithCatchError(execFun, value, resolve, reject) {
  try {
    const result = execFun(value);
    resolve(result);
  } catch (error) {
    reject(error);
  }
}

class MyPromise {
  constructor(executor) {
    this.status = PROMISE_STATUS_PENDING; // è®°å½•promiseçŠ¶æ€
    this.value = undefined; // resolveè¿”å›å€¼
    this.reason = undefined; // rejectè¿”å›å€¼
    this.onFulfilledFns = []; // å­˜æ”¾æˆåŠŸå›è°ƒ
    this.onRejectedFns = []; // å­˜æ”¾å¤±è´¥å›è°ƒ

    const resolve = value => {
      if (this.status === PROMISE_STATUS_PENDING) {
        queueMicrotask(() => {
          if (this.status !== PROMISE_STATUS_PENDING) return;
          this.status = PROMISE_STATUS_FULFILLED;
          this.value = value;
          this.onFulfilledFns.forEach(fn => {
            fn(this.value);
          });
        });
      }
    };
    const reject = reason => {
      if (this.status === PROMISE_STATUS_PENDING) {
        queueMicrotask(() => {
          if (this.status !== PROMISE_STATUS_PENDING) return;
          this.status = PROMISE_STATUS_REJECTED;
          this.reason = reason;
          this.onRejectedFns.forEach(fn => {
            fn(this.reason);
          });
        });
      }
    };

    try {
      executor(resolve, reject);
    } catch (error) {
      reject(error);
    }
  }

  then(onFulfilled, onRejected) {
    onFulfilled =
      onFulfilled ||
      (value => {
        return value;
      });

    onRejected =
      onRejected ||
      (err => {
        throw err;
      });

    return new MyPromise((resolve, reject) => {
      // 1ã€ when operate then, status have confirmed
      if (this.status === PROMISE_STATUS_FULFILLED && onFulfilled) {
        execFunctionWithCatchError(onFulfilled, this.value, resolve, reject);
      }
      if (this.status === PROMISE_STATUS_REJECTED && onRejected) {
        execFunctionWithCatchError(onRejected, this.reason, resolve, reject);
      }

      if (this.status === PROMISE_STATUS_PENDING) {
        // this.onFulfilledFns.push(onFulfilled);
        if (onFulfilled) {
          this.onFulfilledFns.push(() => {
            execFunctionWithCatchError(onFulfilled, this.value, resolve, reject);
          });
        }

        // this.onRejectedFns.push(onRejected);
        if (onRejected) {
          this.onRejectedFns.push(() => {
            execFunctionWithCatchError(onRejected, this.reason, resolve, reject);
          });
        }
      }
    });
  }

  catch(onRejected) {
    return this.then(undefined, onRejected);
  }

  finally(onFinally) {
    this.then(
      () => {
        onFinally();
      },
      () => {
        onFinally();
      }
    );
  }

  static resolve(value) {
    return new MyPromise(resolve => resolve(value));
  }

  static reject(reason) {
    return new MyPromise((resolve, reject) => reject(reason));
  }

  static all(promises) {
    return new MyPromise((resolve, reject) => {
      const values = [];
      promises.forEach(promise => {
        promise.then(
          res => {
            values.push(res);
            if (values.length === promises.length) {
              resolve(values);
            }
          },
          err => {
            reject(err);
          }
        );
      });
    });
  }

  static allSettled(promises) {
    return new MyPromise(resolve => {
      const results = [];
      promises.forEach(promise => {
        promise.then(
          res => {
            results.push({ status: PROMISE_STATUS_FULFILLED, value: res });
            if (results.length === promises.length) {
              resolve(results);
            }
          },
          err => {
            results.push({ status: PROMISE_STATUS_REJECTED, value: err });
            if (results.length === promises.length) {
              resolve(results);
            }
          }
        );
      });
    });
  }

  static race(promises) {
    return new MyPromise((resolve, reject) => {
      promises.forEach(promise => {
        promise.then(
          res => {
            resolve(res);
          },
          err => {
            reject(err);
          }
        );
      });
    });
  }

  static any(promises) {
    return new MyPromise((resolve, reject) => {
      const reasons = [];
      promises.forEach(promise => {
        promise.then(
          res => {
            resolve(res);
          },
          err => {
            reasons.push(err);
            if (reasons.length === promise.length) {
              // reject(new AggreagateError(reasons));
              reject(reasons);
            }
          }
        );
      });
    });
  }
}

const p1 = new MyPromise((resolve, reject) => {
  setTimeout(() => {
    console.log("--- 1 ---");
    resolve(111);
  });
}).then(res => {
  console.log("p1 res :>> ", res);
});

const p2 = new MyPromise((resolve, reject) => {
  console.log("--- 2 ---");
  resolve(222);
});

const p3 = new MyPromise((resolve, reject) => {
  console.log("--- 3 ---");
  resolve(333);
});

const p4 = new MyPromise((resolve, reject) => {
  console.log("--- 4 ---");
  reject(444);
});

MyPromise.all([p2, p3]).then(res => {
  console.log("p2&p3 res :>> ", res);
});

MyPromise.all([p2, p4])
  .then(res => {
    console.log("p2&p4 res :>> ", res);
  })
  .catch(err => {
    console.log("err :>> ", err);
  });

// --- 2 ---
// --- 3 ---
// --- 4 ---
// p2&p3 res :>>  [ 222, 333 ]
// err :>>  444
// --- 1 ---
// p1 res :>>  111
```

##### æ‰‹å†™é˜²æŠ–å’ŒèŠ‚æµå‡½æ•°

```ts
function debounce(fn: Function, delay: number) {
  let timer: any = null;

  return function () {
    if (timer) {
      clearTimeout(timer);
    }
    timer = setTimeout(() => {
      fn.apply(this, arguments);
      timer = null;
    }, delay);
  };
}


function throttle(fn: Function, delay: number) {
  let timer: any = null;

  return function () {
    if (timer) return;
    timer = setTimeout(() => {
      fn.apply(this, arguments);
      timer = null;
    }, delay);
  };
}

```

##### æ‰‹å†™å¿«é€Ÿæ’åº

```ts
function quickSort(arr: number[], startIndex = 0): number[] {
  if (arr.length <= 1) return arr;
  const right: number[] = [],
    left: number[] = [],
    startNum = arr.splice(startIndex, 1)[0];
  for (let i = 0; i < arr.length; i++) {
    if (arr[i] < startNum) {
      left.push(arr[i]);
    } else {
      right.push(arr[i]);
    }
  }
  return [...quickSort(left), startNum, ...quickSort(right)];
}
```

##### è¾“å…¥ä¸ºä¸¤ä¸ªä¸€ç»´æ•°ç»„ï¼Œå°†è¿™ä¸¤ä¸ªæ•°ç»„åˆå¹¶ï¼Œå»é‡ï¼Œä¸è¦æ±‚æ’åºï¼Œè¿”å›ä¸€ç»´æ•°ç»„

```ts
function dealArr(arr1: any[], arr2: any[]): any[] {
  return Array.from(new Set([...arr1.flat(), ...arr2.flat()]));
}

const arr1 = ["a", 1, 2, 3, ["b", "c", 5, 6]];
const arr2 = [1, 2, 4, "d", ["e", "f", "5", 6, 7]];

console.log("dealArr(arr1, arr2 ); :>> ", dealArr(arr1, arr2)); // dealArr(arr1, arr2 ); :>>  [ 'a', 1, 2, 3,'b', 'c', 5,6, 4, 'd', 'e', 'f','5', 7]
```

##### ç¼–å†™å‡½æ•°convert(money) ï¼Œä¼ å…¥é‡‘é¢ï¼Œå°†é‡‘é¢è½¬æ¢ä¸ºåƒåˆ†ä½è¡¨ç¤ºæ³•ã€‚ex:-87654.3 => -87,654.3

æ€è·¯ï¼šåˆ¤æ–­æ˜¯å¦æ˜¯è´Ÿæ•°ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰å°æ•°ç‚¹ï¼Œå°†æ•´æ•°éƒ¨åˆ†è¿›è¡Œå¤„ç†ã€‚

```ts
function convert(money: number): string {
  let result: string[] = []; // ç”¨äºå­˜æ”¾æ•´æ•°éƒ¨åˆ†
  let negativeFlag: string = ""; // æ˜¯å¦è¦è´Ÿå·
  let tail: string = ""; // ç”¨äºå­˜æ”¾å°æ•°ç‚¹åé¢éƒ¨åˆ†
  let arr: string[] = [...String(money)];

  // åˆ¤æ–­æ˜¯å¦æ˜¯è´Ÿæ•°
  if (arr[0] === "-") {
    negativeFlag = "-";
    arr.shift();
  }

  // åˆ¤æ–­æ˜¯å¦å­˜åœ¨å°æ•°ç‚¹
  const dotIndex: number = arr.indexOf(".");
  if (dotIndex !== -1) {
    tail = arr.splice(dotIndex, arr.length - dotIndex).join("");
  }

  // å¤„ç†æ•´æ•°éƒ¨åˆ†åŠ ä¸Šåƒåˆ†ä½
  const reverseArray: string[] = arr.reverse();
  for (let i = 0; i < reverseArray.length; i++) {
    if ((i + 1) % 3 === 0 && i + 1 < reverseArray.length) {
      result[i] = "," + reverseArray[i];
    } else {
      result[i] = reverseArray[i];
    }
  }
  return negativeFlag + result.reverse().join("") + tail;
}
```

### æ€»ç»“

ä¸€ä¸ªæ¸£æ¸£å‰ç«¯åœ¨é¢è¯•è¿‡ç¨‹ä¸­é‡åˆ°çš„é¢˜ç›®ğŸ˜ã€‚
